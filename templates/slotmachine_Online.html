<!DOCTYPE html>
<html>
<head>
  <title>Fortune Slot Online Users contra Users</title>
  <meta http-equiv="ScreenOrientation" content="autoRotate:disabled">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.2.3/dist/css/bootstrap-reboot.min.css"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style3x3.css') }}">
  <link rell="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  <style>
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 99999;
      background: trasnparent;
      background-size: cover;
      background-repeat: no-repeat;
      padding: 15px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      height: 90px;
      border-radius:15px;
    }
    .logo {
      text-align:center;
      font-size:40px;
      font-family:monospace;
      color:gold;
      background:#000;
      border-radius:10px;
    }
    .hamburguer{
      position:relative;
      display:block;
      width:100px;
      height:22px;
      background:#fff;
      transition:.3s;
      border-radius:10px;
      margin-top:90px;
      z-index:9999;
    }
    .hamburguer::before,
    .hamburguer::after{
      content:'';
      position:absolute;
      width:100%;
      height:8px;
      background:#fff;
      transition:.3s;
    }
    .hamburguer::before{top:-10px;}
    .hamburguer::after{bottom:-10px;}
    label[for="menu-toggle"] {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 99999;
    }
    strong {
      color: #000;
      font-size:32px;
      z-index:99999;
    }
    nav {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      width: 100%;
      height: 100vh;
      background: #111;
      padding-top: 100px;
      z-index: 99999;
      opacity:70%;
    }
    #menu-toggle:checked ~ nav {
      display: block;
    }
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    nav ul li {
      padding: 20px;
      text-align: center;
    }
    nav ul li a {
      color: #fff;
      font-size: 32px;
      text-decoration: none;
    }
    .meu-novo-footer {
      background-color: #333;
      color: #fff;
      padding: 20px 0;
      text-align: center;
      width: 100%;
      opacity:50%;
    }
    .meu-novo-footer a {
      color: #4CAF50;
      text-decoration: none;
      margin: 0 10px;
    }
    .meu-novo-footer a:hover {
      text-decoration: underline;
    }
    .msg {
      position: absolute;
      display:flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 9999;
      background-image: url("https://res.cloudinary.com/dptprh0xk/image/upload/v1765234429/pngwing.com_1_pgr4aj.png");
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      width: 100%;
      height: 100%;
      opacity: 0;
      pointer-events: none;
      transition: opacity .3s;
      font-size: 100px;
      font-weight: bold;
      color: #000;
      text-shadow:
          0 0 10px #39ff14,
          0 0 20px #39ff14,
          0 0 30px #39ff14,
          0 0 40px #1a8f03;
      animation: flicker 1.5s infinite alternate;
    }
    @keyframes flicker {
      0%, 18%, 22%, 25%, 53%, 57%, 100% {
        text-shadow:
          0 0 4px #39ff14,
          0 0 11px #39ff14,
          0 0 19px #39ff14,
          0 0 40px #1a8f03;
      }
      20%, 24%, 55% {
        text-shadow: none;
      }
    }
    
    #notification-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 99999;
    }
    .notification-card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      padding: 15px;
      width: 600px;
      transition: opacity 0.3s ease;
    }
    .notification-icon {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      border-radius: 50%;
    }
    .notification-content h3 {
      font-size: 16px;
      margin: 0 0 5px 0;
    }
    .notification-content p {
      font-size: 14px;
      color: #666;
      margin: 0;
    }
    #autoplayBox {
      display:none;
      height:480px;
      position:fixed;
      right:30px;
      background:#111;
      padding:20px;
      border-radius:10px;
      z-index:99999;
      bottom:500px;
      align-items:center;
      justify-content:colunm;
    }
    #autoplayBox h3 {
      color:white;
      text-align:center;
      margin:0 0 10px 0;
    }
    #autoplayBox .autoOption {
      padding:10px;
      height:100px;
      background:#222;
      color:white;
      border:none;
      border-radius:5px;
      cursor:pointer;
      gap:20px;
      
    }
    #autoplayBox .autoOption:hover {
      background:#444;
    }
    .clock {
        top:0;
        aling-items:center;
        justify-content:center;
        font-size: 3rem;
        font-family: monospace;
        color: #fff;
        text-align:center;
        padding: 10px 20px;
        border: 2px solid #333;
        border-radius: 10px;
    }
     

      </style>
</head>

<body>

<header>
 
  </div>
  <input type="checkbox" id="menu-toggle">
  <label for="menu-toggle">
    <div class="hamburguer"></div>
  </label>
  <div class="clock" id="clock"></div>
  <nav>
    <ul id="menu-list">
      <li><a href="/acesso/users/painel/{{ user_id }}">Painel Plataforma</a></li>
      <li><a href="/acesso/users/pagamentos/{{ user_id }}">TransaÃ§Ãµes/finaceiras</a></li>
      <li><a href="/informacao/jogo/era_egpcia/{{user_id}}">InformaÃ§oes Jogo</a></li>
      <li><a href="/metodos/pagamento/{{user_id}}">Depositar</a></li>
      <li><a href="/acesso/users/saques/{{user_id}}">Sacar Ganhos</a></li>
      <li><a href="/msg/{{user_id}}">Ajuda</a></li>
      <li><a href="/create-link-premiado/{{convite}}/registro">Compartilhar Link ganhe tambem</a></li>
      <li><a href="/">Logout "sair da conta"</a></li>
      <!-- CONVIDAR USUÃRIOS -->
        <div id="invite-users" style="
            position: relative;
            top:160px;
            left:20px;
            width:800px;
            background:#222;
            color:#fff;
            padding:10px;
            border-radius:10px;
            z-index:99;">
           
          <h4 style="text-align:center; color:blue; font-family:monospace;">Convidar Jogadores e disputar saldo</h4>
          
          <h4 style="color:gold;"> convites aceitos:{{quantidade_aceitos}}</h4> 
          <h4 style="color:gold;">giros: 3 por vez</h4>
          <h4 style="color:green;"> banca total R$ {{valor_room}}</h4>
          <h4> Meu ID: {{user_id}}</h4>
          <input type="text" id="inviteUserId" placeholder="Digite user_id" style="width:100%; height:80px; background:#fff; color:green; padding:5px; margin-bottom:5px;">
          <input type="text" id="valorDuelo" placeholder="Digite o Valor Duelo min:R$10,00 max:R$50.000,00" style="width:100%; height:80px; background:#fff; color:green; padding:5px; margin-bottom:5px;">
      
          <div class="container-users-onlines">
           
           
          </div>
          <button id="inviteBtn" style="width:100%; padding:5px; background:#28a745; height:60px;  color:white; border:none; border-radius:5px; cursor:pointer;">Convidar</button>
          <button id="entra_room" style="width:100%; padding:5px; background:blue; height:60px;  color:white; border:none; border-radius:5px;gap:10px;cursor:pointer;">Entrar Jogo</button>
          
      
          <div id="invitedList" style="margin-top:5px; font-size:32px; max-height:150px; overflow-y:auto;">
           <h4 style="color:gold;"> convites enviados min: 5 users:{{quantidade_convite_enviado}}</h4>
          </div>

           <!-- DIV VISÃVEL PRA TODOS -->
             <div id="users-online" style="
               
               right: 10px;
               bottom: 10px;
               width: auto;
               max-height: 300px;
               overflow-y: auto;
               background: #555;
               color: #0f0;
               padding: 10px;
               font-family: monospace;
               font-size: 22px;
               
               text-align:center;
             ">
               <strong style="color:#fff;">ðŸ‘¥ Jogadores Onlines</strong>
               <div id="users-list" style="color:#fff;"></div>
             </div>
    </ul>
    
  </nav>
</header>

<div id="slotCanvas">
  <div id="jackpot"><h1 class="slogan"></h1></div>
  <div id="linesLayer"></div>
  <audio id="spinSound" src="https://res.cloudinary.com/dptprh0xk/video/upload/v1765318329/reelSpin_sea06g.mp3"></audio>
  <audio id="winSound" src="https://res.cloudinary.com/dptprh0xk/video/upload/v1765318888/slotWin_ivooyw.mp3"></audio>
  <audio id="stopSpinSound" src="https://res.cloudinary.com/dptprh0xk/video/upload/v1765319672/reelStop_znsv9k.mp3"></audio>
  <audio id="ambienteSound" src="https://res.cloudinary.com/dptprh0xk/video/upload/v1765320627/cinematic-egypt-music-387089_yjnfna.mp3" loop autoplay></audio>
  
  <div id="reels">
    <div class="reel"></div>
    <div class="reel"></div>
    <div class="reel"></div>
  </div>
  <div class="msg" id="win"></div>
  
   
  </div>
  <div id="controls">
    <div class="secao-saldo">
      <span class="titulo-saldo">balance</span>
      <span class="valor-saldo" id="balance">{{ balance }}</span>
    </div>
    <div class="secao-apostas">
      <span class="titulo-apostas">bet</span>
      <span class="valor-apostas" id="betValue">0.50</span>
    </div>
    <div class="secao-ganhos">
      <span class="titulo-ganhos">win</span>
      <span class="valor-ganhos" id="espeho_win">0.00</span>
    </div>
  </div>

  <div id="spin-control">
     <img class="turbo" onclick="velocidade-turbo()" src="https://res.cloudinary.com/dptprh0xk/image/upload/v1765216932/pngwing.com_x7b7mf.png" alt="turbo image">
    <img class="betminus" onclick="betMinus()" src="https://res.cloudinary.com/dptprh0xk/image/upload/v1765398373/minus_b4jnqx.png" alt="betminus image">
    <img id="spin" src="https://res.cloudinary.com/dptprh0xk/image/upload/v1765213395/button_besouro_spin_wgir8u.png" alt="spin image">
    <img class="betplus" onclick="betPlus()" src="https://res.cloudinary.com/dptprh0xk/image/upload/v1765398373/add_lc59lu.png" alt="betplus image">
    <img id="autoplayBtn" src="https://res.cloudinary.com/dptprh0xk/image/upload/v1763946973/Pngtree_vector_play_button_icon_4239632_djasvt.png" alt="auto image">
     
  </div>
</div>

<div id="autoplayBox">
  <h3>Auto Play</h3>
  <div style="display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-top:10px;">
    <button class="autoOption" data-v="1">2=volta</button>
    <button class="autoOption" data-v="2">3=volta</button>
    
  </div>
  <button id="startBtn" style="width:100%; margin-top:10px; padding:15px; background:#28a745; color:white; border:none; border-radius:5px; cursor:pointer;">Iniciar</button>
</div>

<footer class="meu-novo-footer">
  <p>&copy; 2025 Ferrari Games Itech-io Todos os direitos reservados.</p>
  <div><a href="#">Compartilhe</a> | <a href="#">Suporte</a></div>
</footer>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

<script>
  const socket = io();
  const USER_ID = "{{ user_id }}";
  const ROOM_ID = "{{ room_id }}";
  const usersList = document.getElementById("users-list");

  socket.emit("join_users", { user_id: USER_ID });
  socket.emit("join_room", { room_id: ROOM_ID });

  socket.on("user_conectado", (data)=>{
    const div=document.createElement("div");
    div.textContent = `ðŸ‘¤ ${data.user_id} |ðŸ‘¤${data.nome}| |ðŸŒ ${data.cidade} ðŸ’° ${data.balance}`;
    usersList.prepend(div);
  });

  socket.on("room_spin",(data)=>{
    if(data.room_id!==ROOM_ID) return;
    if(data.user_id!==USER_ID){
      window.slot.nextSymbols=data.grid;
      window.slot.onSpinStart(data.grid);
    }
  });
</script>

<script type="module">
  import Slot from "{{ url_for('static', filename='js/Slot_Room.js') }}";
  import Reel from "{{ url_for('static', filename='js/Reel3x3.js') }}";
  import Symbol from "{{ url_for('static', filename='js/Symbol3x3.js') }}";
  window.USER_ID="{{ user_id }}";
  const slot=new Slot(document.getElementById("slotCanvas"),{mode:"room",room_id:"{{ room_id }}"});
  window.slot=slot;
  slot.init();
</script>

<script type="module">
 function updateClock() {
     const now = new Date();
     const hours = String(now.getHours()).padStart(2, '0');
     const minutes = String(now.getMinutes()).padStart(2, '0');
     const seconds = String(now.getSeconds()).padStart(2, '0');
     const timeString = `${hours}:${minutes}:${seconds}`;
     document.getElementById('clock').textContent = timeString;
 }
 updateClock();
 setInterval(updateClock, 1000);
</script>



<script>
  const invitedUsers = [];
  const inviteBtn = document.getElementById("inviteBtn");
  const inviteUserIdInput = document.getElementById("inviteUserId");
  const invitedList = document.getElementById("invitedList");

  inviteBtn.addEventListener("click", () => {
    const userId = inviteUserIdInput.value.trim();
    if(userId && !invitedUsers.includes(userId)){
      invitedUsers.push(userId);
      const div = document.createElement("div");
      div.textContent = `ðŸ‘¤ ${userId}`;
      invitedList.appendChild(div);
      socket.emit("invite_user", { from: window.USER_ID, to: userId });
      inviteUserIdInput.value = "";
    }
  });

  socket.on("invite_received", (data) => {
    if(data.to === window.USER_ID){
      alert(`VocÃª recebeu um convite de ${data.from} para jogar!`);
    }
  });
</script>
</body>
</html>



