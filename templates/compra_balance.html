<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compra Saldo</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    background:#333;
    font-family:monospace;
    font-size:24px;
    color:#fff;
    gap:20px
}
button{
    width:300px;
    height:60px;
    background:blue;
    color:#fff;
    border:0;
    border-radius:8px;
    font-size:20px;
    cursor:pointer
}
button:hover{opacity:.9}
</style>
</head>

<body>

<h1>Adicionar Saldo</h1>
<button onclick="compraSaldo(5)">Depositar R$ 5</button>

<script>
const user_id = "{{ user_id }}";  

async function compraSaldo(amount){
    const res = await fetch('/create_payment_preference', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({
            amount: amount,
            user_id: user_id
        })
    });

    const data = await res.json();
    window.location.href = data.init_point;
}
</script>

</body>
</html>
